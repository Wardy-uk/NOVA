COMPLETED
---------
[DONE] persist settings
[DONE] persist filter selection
[DONE] auto run Ask Nova when session first loads
[DONE] pre load AI tasks - esp the stand ups - they take too long in the UI
[DONE] add comment history to jira side drawer
[DONE] Jira transitions - filtered to valid transitions with comment modals
[DONE] Standup persistence - past results persist, re-run option, resets at midnight
[DONE] make ask nova button x2 height, and central top/bottom in the panel
[DONE] lightmode/dark mode/system preference toggle
[DONE] allow multi select of sources for ask nova
[DONE] put borders round Ask NOVA to make it look like a button
[DONE] reduce ask nova button size by 20%
[DONE] Jira automations from NOVA - JQL search, create issue, preset queries
[DONE] daily stats/KPIs in own Stats page - overdue, due today/week, completion rate, avg age, SLA, by source/status
[DONE] create mock up page for "delivery sheet" - reads from local xlsx, cached, with limit param
[DONE] Split Daily Stats and KPIs - 2 separate pages
[DONE] preload delivery sheet mock up - max 5 latest from each tab (?limit=N param)
[DONE] Daily Stats as home page
[DONE] Delivery data entry - local DB CRUD for delivery entries
[DONE] CRM page - customer health (RAG), business reviews, DB-backed CRUD
[DONE] login - JWT auth with login/register gate, first-run admin setup
[DONE] add toggle to turn off - sync source toggles per M365 type in Settings
[DONE] PA bridge top-level on/off toggle + per-source toggles
[DONE] O365 per-source sync toggles (Planner, To-Do, Calendar, Email) in integration card
[DONE] O365 enable toggle auto-saves (no more needing to click Save)
[DONE] fix login race condition - token not synced before task/health fetches caused instant logout
[DONE] PA bridge toggle moved to RH side to match integration card layout
[DONE] configurable email filter + days-to-pull in Settings (flagged/unread/all, 1-30 days)
[DONE] delivery sheet MRR overflow CSS fix (truncate + min-w-0 on KpiCard)
[DONE] add Remember Me to login page (sessionStorage when unchecked, localStorage when checked)
[DONE] sync frequency dropdown in Settings (1/2/5/10/15/30 min, reads refresh_interval_minutes)
[DONE] remove JQL search from UI (kept Create Issue only)
[DONE] create tasks from NOVA — O365 Planner + To-Do via /api/o365/ routes + CreateTaskForm UI
[DONE] edit tasks + sync back to source — update-planner-task, update-todo-task via TaskDrawer
[DONE] universal side drawer for all task types — click any task to open, editable for Planner/To-Do
[DONE] remove "Open" from task items — Edit button opens universal drawer
[DONE] Jira fields in TaskDrawer — Priority dropdown, Due Date picker, Agent Last Updated, Agent Next Update
[DONE] Jira transitions + comment history ported to universal TaskDrawer (replaces old JiraDrawer)
[DONE] NextActions uses universal TaskDrawer instead of old JiraDrawer
[DONE] stale task cleanup hardened — ephemeral sources (calendar/email) allow empty purge, task sources (jira/planner/todo/monday) protected from accidental wipe
[DONE] per-integration auto sync — each source has its own interval dropdown (O365 per-source, Jira/Monday per-card), falls back to global default
[DONE] My Focus panel — dedicated view, Focus/Unfocus replaces Pin/Unpin across all UI, Focus button in NextActions + Standup, Focus card on Command Centre
[DONE] deliveries — wider panel (max-w-7xl for delivery view)
[DONE] deliveries — training date column (DB schema + form + table column)
[DONE] deliveries — starred deliveries (star/unstar toggle, starred panel above table, amber accent)
[DONE] Jira assignee picker — search/reassign users from TaskDrawer, user search API route
[DONE] deliveries — side drawer for editing (DeliveryDrawer, click any row to open, xlsx rows pre-fill new entry)
[DONE] deliveries — remove Branches + Incr columns, full-width panel (max-w-full)
[DONE] deliveries — multi-select status filter on table
[DONE] deliveries — multi-select status filter on dashboard KPI figures
[DONE] move Sync Now button to Settings page — per-integration + per-O365-source Sync Now buttons
[DONE] README technical documentation
[DONE] deliveries — starred for me / starred for all (star_scope + starred_by, panel toggle My Stars / Team Stars)
[DONE] deliveries — remove duplicate entries (dedup query + endpoint, hide xlsx rows when DB entry exists)
[DONE] deliveries — clean up test data
[DONE] deliveries — manual SharePoint sync (pull from SP via MCP file tools, Sync from SharePoint button)
[DONE] per-source Sync Now buttons in integration cards (POST /api/tasks/sync/:source)
[DONE] removed global Sync Now from navbar (now per-integration in Settings)
[DONE] star xlsx rows — star button on spreadsheet rows creates DB entry with is_starred=1
[DONE] deliveries — prefill drawer from xlsx row click (opens DeliveryDrawer with spreadsheet data)

TO DO
-----

--- Tier 0: Blockers ---
0. MS365 MCP re-auth — device code flow needs admin approval at https://login.microsoft.com/device
   - Token for NickW@nurtur.tech is expired
   - Blocks: SharePoint sync fix, any new MS365 features
   - After auth: verify-login, then continue SP sync debugging (see memory/sharepoint-debug.md)

--- Tier 1: Daily workflow unlocks ---
1. send/reply/forward emails from NOVA — send-mail, reply-mail-message, forward-mail-message
2. create/edit calendar events from NOVA — create-calendar-event, update-calendar-event
3. deploy to server
4. deliveries — fix SharePoint sync pull (3 bugs found, see memory/sharepoint-debug.md):
   a. pull() calls nonexistent tools (get-sharepoint-site-by-path, search-sharepoint-sites)
   b. download-onedrive-file-content needs driveItemId not filePath
   c. rewrite to: list-drives → list-folder-files (navigate folders) → download by driveItemId
5. deliveries — push to SharePoint (write local DB changes back to xlsx on SharePoint)

--- Tier 2: Dynamics 365 + Polish ---
5. Dynamics 365 CRM integration — pull accounts + tasks from Dataverse
   - Org: https://nurtur-prod.crm11.dynamics.com/ (UK region, crm11)
   - Dataverse MCP server: https://nurtur-prod.crm11.dynamics.com/api/mcp (HTTP transport)
   - Needs: a. Add HTTP/SSE MCP transport to McpClientManager (currently stdio only)
            b. Azure AD OAuth for Dataverse (same tenant as MS365 — NickW@nurtur.tech)
            c. Register Dataverse as MCP server, tools: read_query, list_tables, create_record, update_record, Search
            d. Build CRM sync service — pull accounts, tasks, activities into NOVA
   - Depends on: Tier 0 (MS365 re-auth, same Azure AD tenant)
6. user roles — admin vs viewer vs editor
    a. requireRole('admin') middleware function
    b. define which routes are admin-only (Settings writes, user management, CRM deletes, etc.)
    c. add 'editor' role to schema if needed
    d. UI gating — hide admin-only controls (Settings, CRM delete, user management) for non-admin users
6. multi-user — depends on roles
7. browse mail folders — list-mail-folders, list-mail-folder-messages
8. browse specific planner plans — get-planner-plan, list-plan-tasks
9. deprecate PA workaround now admin has approved O365 integration (on hold)

--- Tier 3: Nice to have ---
10. email attachments — list/get/add attachments on messages
11. multi-calendar support — list-calendars, get-specific-calendar-view
12. Documentation — User guides (help page)

--- Tier 4: Roadmap ---
13. Jira move-team automation (move ticket to a different Jira project)
14. sales pipeline — replace onboarding spreadsheet
    - create tickets from NOVA
    - launch onboarding tool from NOVA
    - add order form creates task
    - add "welcome pack" to NOVA
